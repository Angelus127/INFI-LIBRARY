{% extends 'base.html' %}
{% block title %} {{media.titulo}} {% endblock %}
{% block content %}

<div id="details_media">
    {% if media.portada %} <img src="{{ media.portada }}" alt="{{ media.titulo }}"> {% endif %}
    {% if media.titulo %} <h2>{{ media.titulo }}</h2> {% endif %}
    {% if media.autores %}
        {% for a in media.autores %}
            <h3> {{ a }}</h3>
        {% endfor %}
    {% endif %}

    {% if media.rating %} <p class="rating"> {{ media.rating }} </p> {% endif %}
    {% if media.anio %} <p class="year"> {{ media.anio }} </p> {% endif %}
    {% if media.descripcion or media.resumen %} <p class="resume" >{{ media.descripcion or media.resumen }}</p> {% endif %}
    {% if media.generos %}
        {% for g in media.generos[:3] %}
            <p class="genre"> {{ g }} </p>
        {% endfor %}
    {% endif %}
    {% if media.tipo %} <p> {{ media.tipo }} </p> {% endif %}
</div>

<div id="details_user">
    {% if media.estado_usuario %} <h4 id="user-status"> {{ media.estado_usuario }} </h4> {% endif %}
    {% if media.puntaje %} <h3 id="user-score"> {{ media.puntaje }} </h3> {% endif %}
    {% if media.opinion %} <p id="user-review"> {{ media.opinion }} </p> {% endif %}
</div>

<div id="edit">
    <form action="{{ url_for('media.eliminar', media_id=media.id) }}" method="post" onsubmit="return confirm('¬øSeguro que deseas borrar este elemento?');">
        <button type="submit" class="btn-borrar">üóëÔ∏è Borrar</button>
    </form>
    <button id="edit-btn">Editar</button>
</div>

<div id="modal" style="display:none;">
    <select id="edit-status">
        <option value="">Ninguno</option>
        <option value="en_progreso"> En progreso </option>
        <option value="pendiente"> Pendiente </option>
        <option value="finalizado"> Completado </option>
        <option value="planeado"> Planeado </option>
        <option value="abandonado"> Abandonado </option>
    </select>

    <input type="number" min="5.0" max="9.9" step="0.1" id="edit-score" value="5.0" placeholder="Puntuaje">

    <textarea id="edit-review" placeholder="Opinion"></textarea>

    <button id="save-btn">Guardar</button>
    <button id="close-btn">Cerrar</button>
</div>

<div id="media-container" data-id="{{ media.id }}"></div>

<script src="{{ url_for('static', filename='js/update.js') }}"></script>
{% endblock %}