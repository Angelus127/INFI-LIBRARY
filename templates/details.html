{% extends "base.html" %}
{% block title %}Detalles del libro{% endblock %}
{% block content %}
<div class="details-container">
    {% set info = book.volumeInfo %}
    <div class="book-info">
        <img src="{{ info.imageLinks.thumbnail if info.imageLinks else url_for('static', filename='no_image.png') }}" alt="cover">
        <div>
            <h2>{{ info.title }}</h2>
            <p><strong>Autor:</strong> {{ info.authors|join(', ') if info.authors else 'Desconocido' }}</p>
            {% if info.publisher %}
                <p><strong>Editorial:</strong> {{ info.publisher }}</p>
            {% endif %}
            {% if info.categories %}
                <p><strong>Género:</strong> {{ info.categories|join(', ') }}</p>
            {% endif %}
            {% if info.pageCount %}
                <p><strong>Páginas:</strong> {{ info.pageCount }}</p>
            {% endif %}
            {% if info.publishedDate %}
                <p><strong>Publicado en:</strong> {{ info.publishedDate }}</p>
            {% endif %}
            {% if info.industryIdentifiers %}
                <p><strong>ISBN:</strong> {{ info.industryIdentifiers[0].identifier }}</p>
            {% endif %}
            {% if info.description %}
                <p class="descripcion"><strong>Descripción:</strong> {{ info.description|safe }}</p>
            {% endif %}
        </div>
    </div>

    <form method="post" class="rating-form">
        <label>Puntuación (1.0 - 9.9):</label>
        <input type="number" step="0.1" min="1.0" max="9.9" name="puntuacion" required>

        <label>Estado:</label>
        <select name="estado" required>
            <option value="planeado">Planeado</option>
            <option value="en_progreso">En progreso</option>
            <option value="finalizado">Finalizado</option>
            <option value="abandonado">Abandonado</option>
        </select>

        <label>Opinión:</label>
        <textarea name="opinion" rows="4" placeholder="Escribe tu opinión..."></textarea>

        <button type="submit">Guardar</button>
    </form>
</div>
{% endblock %}
